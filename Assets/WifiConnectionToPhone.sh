#!/bin/bash

# Путь к ADB (если не добавлен в PATH, укажите полный путь, например: /path/to/adb)
ADB=adb

# IP-адрес устройства
DEVICE_IP="192.168.1.2"

# Проверка, доступен ли ADB
if ! command -v $ADB &> /dev/null; then
    echo "Ошибка: ADB не найден. Убедитесь, что Android SDK установлен и ADB добавлен в PATH."
    exit 1
fi

# Шаг 1: Проверка подключенных устройств
echo "Проверка подключенных устройств..."
$ADB devices

# Шаг 2: Переключение ADB в режим TCP/IP на порту 5555
echo "Переключение ADB в режим TCP/IP (порт 5555)..."
$ADB tcpip 5555

# Пауза для завершения переключения
sleep 2

# Шаг 3: Подключение к устройству по IP
echo "Подключение к устройству $DEVICE_IP:5555..."
$ADB connect $DEVICE_IP:5555

# Шаг 4: Проверка списка устройств после подключения
echo "Список подключенных устройств:"
$ADB devices

echo "Настройка завершена!"